(()=>{var e={467:()=>{},740:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(609),i=n.n(s)()((function(e){return e[1]}));i.push([e.id,'* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  font-family: "Roboto", sans-serif;\n}\n\nbody {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  flex-wrap: wrap;\n  height: 750px;\n}\n\n.flex {\n  color: #636363;\n  display: flex;\n  max-width: 500px;\n  width: 100%;\n  justify-content: space-around;\n  margin-bottom: 25px;\n  order: 0;\n}\n\n.flex > span:hover {\n  transition: 0.125s all ease-in-out;\n  transform: scale(1.05);\n  cursor: pointer;\n}\n\n.records-grid {\n  display: grid;\n  grid-template-rows: repeat(4, 1fr);\n  grid-template-columns: repeat(4, 1fr);\n}\n\n.block {\n  user-select: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: white;\n  margin: 10px;\n  box-shadow: -1px 1px 5px #b3b4b5;\n  color: #636363;\n  font-size: 32px;\n  font-weight: 900;\n  border-radius: 10%;\n  transition: 0.125s transform ease-in-out;\n  transition-property: left, top;\n  top: 0;\n  left: 0;\n}\n\n.block:hover {\n  transform: scale(1.02);\n  cursor: pointer;\n}\n\n.block_empty {\n  visibility: hidden;\n}\n\n.game-board {\n  display: grid;\n  width: 100%;\n  height: 100%;\n  max-width: 500px;\n  max-height: 500px;\n  background-color: white;\n  border-radius: 5%;\n  box-shadow: 0px 0px 5px #b3b4b5;\n}\n\n.wrapper {\n  max-width: 500px;\n  max-height: 500px;\n  width: 100%;\n  height: 100%;\n  order: 1;\n}\n\n.wrapper > div > span {\n  transition: 0.25s transform ease-in-out;\n  font-size: 22px;\n  margin-bottom: 10px;\n  text-transform: uppercase;\n}\n\n.wrapper > div > span:hover {\n  transform: scale(1.02);\n  cursor: pointer;\n}\n\n.menu {\n  max-width: 500px;\n  width: 100vw;\n  height: 500px;\n  border-radius: 5%;\n  position: fixed;\n  float: right;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  flex-wrap: wrap;\n}\n\n.menu > * {\n  max-width: 200px;\n}\n\n.hide_menu {\n  visibility: hidden;\n}\n\n.hide {\n  transition: 0s;\n  visibility: hidden;\n}\n\n.block_active {\n  transform: scale(1.03);\n  box-shadow: -2px 2px 7px #b1b2b3;\n}\n\n.form-wrapper {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: center;\n  width: 100vw;\n  max-width: 500px;\n  min-height: 200px;\n  position: fixed;\n  top: 210px;\n  z-index: 2500;\n  background: white;\n  border-radius: 5%;\n  box-shadow: 0px 0px 5px #b3b4b5;\n}\n\n.close-form-button {\n  margin-bottom: 15px;\n  align-self: center;\n  width: 90px;\n  height: 25px;\n  border-radius: 30%;\n  background: white;\n  border: none;\n  box-shadow: 0px 0px 5px #b3b4b5;\n}\n\n.container {\n  padding: 15px;\n}\n\n.container > span {\n  font-size: 14px;\n  font-style: italic;\n  opacity: 0.8;\n}\n\nlabel {\n  margin-top: 5px;\n  font-size: 22px;\n}\n',""]);const r=i},609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,s){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(s)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(i[o]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);s&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},62:(e,t,n)=>{"use strict";var s,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function o(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},s=[],i=0;i<e.length;i++){var a=e[i],l=t.base?a[0]+t.base:a[0],p=n[l]||0,d="".concat(l," ").concat(p);n[l]=p+1;var c=o(d),m={css:a[1],media:a[2],sourceMap:a[3]};-1!==c?(r[c].references++,r[c].updater(m)):r.push({identifier:d,updater:f(m,t),references:1}),s.push(d)}return s}function l(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var r=n.nc;r&&(s.nonce=r)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var p,d=(p=[],function(e,t){return p[e]=t,p.filter(Boolean).join("\n")});function c(e,t,n,s){var i=n?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var r=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function m(e,t,n){var s=n.css,i=n.media,r=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var h=null,u=0;function f(e,t){var n,s,i;if(t.singleton){var r=u++;n=h||(h=l(t)),s=c.bind(null,n,r,!1),i=c.bind(null,n,r,!0)}else n=l(t),s=m.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<n.length;s++){var i=o(n[s]);r[i].references--}for(var l=a(e,t),p=0;p<n.length;p++){var d=o(n[p]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}n=l}}}}},t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={id:s,exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(467);const t={elements:{wrapper:null,timeElement:null,stepsElement:null,saveButton:null,retryButton:null,loseButton:null,soundButton:null,imageCheck:null},properties:{time:0,steps:0,timeId:0},init(){this.elements.wrapper=document.createElement("div"),this.elements.saveButton=document.createElement("span"),this.elements.retryButton=document.createElement("span"),this.elements.soundButton=document.createElement("span"),this.elements.timeElement=document.createElement("span"),this.elements.stepsElement=document.createElement("span"),this.elements.stepsElement.innerText=this.properties.steps,this.elements.saveButton.innerHTML='<i class="fas fa-save">',this.elements.retryButton.innerHTML='<i class="fas fa-undo">',this.elements.soundButton.innerHTML='<i class="fas fa-volume-up"></i>',this.elements.retryButton.addEventListener("click",(()=>{this.generateNewInstance()})),this.elements.saveButton.addEventListener("click",(()=>{this.saveInstance()})),this.elements.soundButton.addEventListener("click",(()=>{this.toggleSound()})),this.elements.wrapper.appendChild(this.elements.timeElement),this.elements.wrapper.appendChild(this.elements.retryButton),this.elements.wrapper.appendChild(this.elements.saveButton),this.elements.wrapper.appendChild(this.elements.soundButton),this.elements.wrapper.classList.add("flex"),4===s.properties.size&&(this.elements.loseButton=document.createElement("span"),this.elements.loseButton.innerHTML='<i class="far fa-flag"></i>',this.elements.wrapper.appendChild(this.elements.loseButton)),this.elements.wrapper.appendChild(this.elements.stepsElement),document.body.appendChild(this.elements.wrapper),this.countTime()},toggleSound(){s.properties.sounds=!s.properties.sounds},saveInstance(){const e={time:t.properties.time,steps:t.properties.steps,size:s.properties.size,gameField:s.instanceProperties.gameField,image:s.instanceProperties.image,containImage:s.instanceProperties.containImage};localStorage.setItem("savedGame",JSON.stringify(e))},generateNewInstance(){s.clearInstance(),s.initInstance()},countTime(){this.elements.timeElement.innerText=`${t.addZero(Math.floor(this.properties.time/60))}:${t.addZero(this.properties.time%60)}`,this.properties.time+=1,this.properties.timeId=setTimeout((()=>{t.countTime()}),1e3)},increaseSteps(){this.properties.steps+=1,this.elements.stepsElement.innerText=this.properties.steps},deletePanel(){clearTimeout(this.properties.timeId),this.elements.wrapper.remove()},addZero:e=>e<10?`0${e}`:e},s={properties:{sounds:!0,size:4,SoundFile:new Audio("assets/BlockSound.mp3")},elements:{gameBoard:null},instanceProperties:{isActive:!1,isNewGame:!0,counts:!0,gameField:[],nullX:0,nullY:0,animate:!0,animateEvent:0,containImage:!1,image:0},shuffle(){const e=[];for(let t=0;t<this.properties.size*this.properties.size;t+=1)e.push(t);const t=e.map((e=>({sort:Math.random(),value:e}))).sort(((e,t)=>e.sort-t.sort)).map((e=>e.value));if(this.checkShuffle(t))for(let e=0;e<this.properties.size;e+=1){this.instanceProperties.gameField.push(new Array(this.properties.size));for(let n=0;n<this.properties.size;n+=1)this.instanceProperties.gameField[e][n]=t[e*this.properties.size+n]}else this.shuffle()},checkShuffle(e){let t=0;for(let n=0;n<this.properties.size*this.properties.size;n+=1){if(0!==e[n])for(let s=0;s<n;s+=1)e[s]>e[n]&&(t+=1);0!==e[n]||this.properties.size%2||(t+=(this.properties.size+1-Math.ceil((n+1)/this.properties.size))%2)}return(t+this.properties.size%2)%2},changeGameBoardSize(){this.elements.gameBoard.style.height=`${this.elements.gameBoard.offsetWidth}px`,document.querySelectorAll(".block").forEach((e=>{e.style.backgroundSize=`${this.elements.gameBoard.offsetWidth}px`}))},initInstance(){this.elements.gameBoard=document.createElement("div"),this.elements.gameBoard.classList.add("game-board"),this.elements.gameBoard.style.setProperty("grid-template-rows",`repeat(${this.properties.size}, 1fr)`),this.elements.gameBoard.style.setProperty("grid-template-columns",`repeat(${this.properties.size}, 1fr)`),i.elements.wrapperElement.appendChild(this.elements.gameBoard),this.elements.gameBoard.style.height=`${this.elements.gameBoard.offsetWidth}px`,window.addEventListener("resize",(()=>{s.changeGameBoardSize()})),this.instanceProperties.isNewGame&&(this.shuffle(),t.properties.time=0,t.properties.steps=-1,t.increaseSteps(),this.instanceProperties.containImage&&(this.instanceProperties.image=`url(assets/${Math.floor(150*Math.random())+1}.jpg)`));for(let e=0;e<this.properties.size;e+=1)for(let t=0;t<this.properties.size;t+=1){const n=document.createElement("div");n.classList.add("block"),n.innerText=this.instanceProperties.gameField[e][t],n.style.backgroundSize=`${this.elements.gameBoard.offsetWidth}px`,n.style.backgroundImage=this.instanceProperties.image,n.style.backgroundPosition=`${100/(this.properties.size-1)*((n.innerText-1)%this.properties.size)}% ${100/(this.properties.size-1)*Math.floor((n.innerText-1)/this.properties.size)}%`,this.instanceProperties.containImage&&(n.style.color="rgba(0, 0, 0, 0.0)"),"0"===n.innerText&&(n.classList.toggle("hide"),this.instanceProperties.nullX=t,this.instanceProperties.nullY=e),this.elements.gameBoard.appendChild(n.cloneNode(!0))}this.updateInstance()},deleteEventListeners(){document.querySelectorAll(".block").forEach((e=>{e.classList.remove("block_active");const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}))},updateInstance(){this.deleteEventListeners();const{nullX:e}=this.instanceProperties,{nullY:t}=this.instanceProperties,n=document.querySelectorAll(".block"),s=[];e>0&&s.push(this.instanceProperties.gameField[t][e-1]),e<this.properties.size-1&&s.push(this.instanceProperties.gameField[t][e+1]),t>0&&s.push(this.instanceProperties.gameField[t-1][e]),t<this.properties.size-1&&s.push(this.instanceProperties.gameField[t+1][e]),n.forEach(((n,i)=>{s.includes(parseInt(n.innerText,10))&&(n.classList.add("block_active"),n.addEventListener("mousedown",(()=>{n.classList.contains("block_active")&&this.moveElement(n,e-i%this.properties.size,t-Math.floor(i/this.properties.size))})))})),this.checkWin()},moveElement(e,t,n){const s=document.querySelector(".hide"),i=e.cloneNode(!0);e.classList.toggle("hide"),i.style.width=`${e.offsetWidth}px`,i.style.height=`${e.offsetHeight}px`,i.style.position="absolute",i.style.zIndex=1e3,i.style.transitionProperty="transform",this.elements.gameBoard.appendChild(i),i.style.top=e.offsetTop-10+"px",i.style.left=e.offsetLeft-10+"px",this.properties.animate=!1,i.addEventListener("mouseup",(()=>{const r=s.offsetLeft+s.offsetWidth/2+5,o=s.offsetTop-s.offsetWidth/2+5,a=e.offsetLeft+e.offsetWidth/2+10,l=e.offsetTop-e.offsetHeight/2+10,p=i.offsetLeft+i.offsetWidth/2+10,d=i.offsetTop-i.offsetHeight/2+10,c=s.offsetWidth/2*1.2;p<a+15&&p>a-15&&d<l+15&&d>l-15?(e.classList.toggle("hide"),this.animate(e,t,n,!0),i.remove()):p<r+c&&p>r-c&&d<o+c&&d>o-c?(this.animate(e,t,n,!1),e.classList.toggle("hide"),i.remove()):(e.classList.toggle("hide"),i.remove())})),document.onmousemove=e=>{!function(e){i.style.left=e.pageX-i.offsetWidth/2+"px",i.style.top=e.pageY-i.offsetHeight/2+"px"}(e)}},deleteElement(e){e.remove()},async animate(e,t,n,s){e.style.transitionProperty="transform,left,top",s&&(e.style.position="relative",e.style.top=(e.offsetHeight+20)*n+"px",e.style.left=(e.offsetWidth+20)*t+"px"),setTimeout((()=>{e.style.position="static",e.style.top=0,e.style.left=0,this.swap(e)}),this.instanceProperties.animate?125:0)},checkWin(){const n=[].concat.apply([],this.instanceProperties.gameField);n.splice(-1,1);const s=n.join("");n.sort(((e,t)=>e-t)).join("")===s&&(e.form.init(),this.addRecords(),e.form.showMessage(`Ура!Вы решили головоломку за ${t.addZero(Math.floor(t.properties.time/60))}:${t.addZero(t.properties.time%60)} и ${t.properties.steps} ходов`),this.clearInstance(),this.instanceProperties.isNewGame=!0,i.toggleHide(),t.deletePanel())},addRecords(){let e=0;const n={time:t.properties.time,steps:t.properties.steps,size:s.properties.size};e=null===localStorage.getItem("records")?[]:JSON.parse(localStorage.getItem("records")),e.push(n),this.saveRecords(e)},saveRecords(e){for(e.sort(((e,t)=>e.time>t.time?1:-1));e.length>10;)e.pop();localStorage.setItem("records",JSON.stringify(e))},swap(e){let n,s;for(let t=0;t<this.properties.size;t+=1){const i=this.instanceProperties.gameField[t].indexOf(parseInt(e.innerText,10));if(-1!==i){n=i,s=t;break}}this.properties.sounds&&this.properties.SoundFile.play();const i=this.instanceProperties.gameField[s][n],r=document.querySelector(".hide"),o=r.style.backgroundPosition;r.style.backgroundPosition=e.style.backgroundPosition,e.style.backgroundPosition=o,r.classList.remove("hide"),e.classList.add("hide"),r.innerText=i,e.innerText=0,this.instanceProperties.gameField[this.instanceProperties.nullY][this.instanceProperties.nullX]=i,this.instanceProperties.gameField[s][n]=0,this.instanceProperties.nullX=n,this.instanceProperties.nullY=s,this.properties.animate=!0,this.updateInstance(),t.increaseSteps()},clearInstance(){document.querySelector(".game-board").remove(),this.instanceProperties.isNewGame=!0,t.elements.stepsElement.innerText=0,t.elements.timeElement.innerText="00:00",this.instanceProperties.gameField=[]}},i={elements:{wrapperElement:null,menuElement:null,newGameButton:null,savedGameButton:null,recordsButton:null,fieldSizeSelector:null,inputElement:null},init(){this.elements.wrapperElement=document.createElement("div"),this.elements.menuElement=document.createElement("div"),this.elements.newGameButton=document.createElement("span"),this.elements.savedGameButton=document.createElement("span"),this.elements.recordsButton=document.createElement("span"),this.elements.fieldSizeSelector=document.createElement("select");const e=document.createElement("label");this.elements.inputElement=document.createElement("input"),this.elements.inputElement.type="checkbox",e.innerText="IMAGE",e.appendChild(this.elements.inputElement),this.elements.wrapperElement.classList.add("wrapper"),this.elements.newGameButton.innerText="New Game",this.elements.newGameButton.addEventListener("click",(()=>{this.startNewGame()})),this.elements.savedGameButton.addEventListener("click",(()=>{this.loadSaved()})),this.elements.recordsButton.addEventListener("click",(()=>{this.showRecords()})),this.elements.savedGameButton.innerText="Saved Game",this.elements.recordsButton.innerText="Records",this.elements.menuElement.classList.add("menu"),this.elements.fieldSizeSelector.setAttribute("size","1");const t=document.createElement("option");t.innerText="3x3",t.setAttribute("value","3"),this.elements.fieldSizeSelector.appendChild(t.cloneNode(!0)),t.innerText="4x4",t.setAttribute("value","4"),this.elements.fieldSizeSelector.appendChild(t.cloneNode(!0)),t.innerText="5x5",t.setAttribute("value","5"),this.elements.fieldSizeSelector.appendChild(t.cloneNode(!0)),t.innerText="6x6",t.setAttribute("value","6"),this.elements.fieldSizeSelector.appendChild(t.cloneNode(!0)),t.innerText="7x7",t.setAttribute("value","7"),this.elements.fieldSizeSelector.appendChild(t.cloneNode(!0)),t.innerText="8x8",t.setAttribute("value","8"),this.elements.fieldSizeSelector.appendChild(t.cloneNode(!0)),this.elements.fieldSizeSelector.value="4",this.elements.menuElement.appendChild(this.elements.newGameButton),this.elements.menuElement.appendChild(this.elements.savedGameButton),this.elements.menuElement.appendChild(this.elements.recordsButton),this.elements.menuElement.appendChild(this.elements.fieldSizeSelector),this.elements.menuElement.appendChild(e),this.elements.wrapperElement.appendChild(this.elements.menuElement),document.body.appendChild(this.elements.wrapperElement)},showRecords(){e.form.init(),e.form.addRecordsToForm(),e.form.showForm()},loadSaved(){if(null===localStorage.getItem("savedGame"))e.form.init(),e.form.showMessage("Нет сохраненной игры!");else{const e=JSON.parse(localStorage.getItem("savedGame"));t.properties.time=e.time,t.properties.steps=e.steps,s.instanceProperties.gameField=e.gameField,s.properties.size=e.size,s.instanceProperties.isNewGame=!1,s.instanceProperties.image=e.image,s.instanceProperties.containImage=e.containImage,this.startNewGame()}},startNewGame(){s.instanceProperties.isNewGame&&(s.properties.size=this.elements.fieldSizeSelector.value),s.instanceProperties.containImage=this.elements.inputElement.checked,i.toggleHide(),t.init(),s.initInstance()},toggleHide(){this.elements.menuElement.classList.toggle("hide_menu")}};var r=n(62),o=n.n(r),a=n(740);o()(a.Z,{insert:"head",singleton:!1}),a.Z.locals,i.init(),e.form.init(),null===localStorage.getItem("firstTime")&&(e.form.showMessage("Привет, в этом проекте я сделал все кроме нахождения решения. Появление цифр на блоках после загрузки игры с картинками не баг, а фича :),\n Функция, проверяющая решаемость - checkShuffle(),\n Если у вас в консоли ошибка Uncheked runtime.lastError в месте index.html:1, то проблема скорей всего в ваших расширениях. Попробуйте отключить их и загрузить приложение заново.\nJS код разбит на отдельные модули, забандлен и минифицирован Webpack'ом.\n Если захотите просмотреть данное сообщение еще раз - очистите переменную firstTime в localStorage."),localStorage.setItem("firstTime",!0))})()})();